<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hanoi Day Trip Planner</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF7; /* Warm neutral background */
            color: #4A4A4A;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #D1D5DB;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #9CA3AF;
        }

        /* Chart Container Styling - MANDATORY for responsiveness */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px; /* Max width to prevent stretching */
            height: 300px; /* Default height */
            max-height: 350px;
            margin-left: auto;
            margin-right: auto;
        }

        @media (max-width: 640px) {
            .chart-container {
                height: 250px;
            }
        }

        /* Card Hover Effects */
        .activity-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .activity-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Timeline Connector Line */
        .timeline-line::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 20px;
            width: 2px;
            background-color: #E5E7EB;
            z-index: 0;
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals (Cream, Beige, Soft Brown) with Sage Green and Terracotta Accents -->
    <!-- Application Structure Plan: 
         1. Header: Quick summary of the trip goals (Time, Budget, People).
         2. Analytical Dashboard: Visualizing the cost breakdown and time distribution to prove feasibility.
         3. Interactive Timeline: The core detailed itinerary. Vertical flow for mobile friendliness.
         4. Budget Sandbox: A tool allowing the user to tweak estimated costs and see if they stay within 500k.
         5. Route Logic: Explaining the geographical flow. 
         Rationale: The user wants a plan that "links together" conveniently. A linear timeline with geographic context is best. -->
    <!-- Visualization & Content Choices:
         - Cost Breakdown -> Goal: Inform/Manage -> Doughnut Chart -> Easy to see proportions of the 500k budget.
         - Time Allocation -> Goal: Plan -> Bar Chart -> Visualizing the day's pace.
         - Itinerary Items -> Goal: Guide -> Interactive Cards -> Clear text, address, and cost details.
         - Budget Adjuster -> Goal: Engage/Customize -> Range Inputs + Dynamic Text -> Users love control over spending.
         - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="antialiased">

    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl mr-2">üõµ</span>
                    <h1 class="font-bold text-xl tracking-tight text-gray-800">Hanoi Trip Planner</h1>
                </div>
                <div class="hidden sm:flex space-x-8 items-center">
                    <a href="#dashboard" class="text-gray-600 hover:text-green-600 font-medium transition">T·ªïng quan</a>
                    <a href="#itinerary" class="text-gray-600 hover:text-green-600 font-medium transition">L·ªãch tr√¨nh</a>
                    <a href="#budget-tool" class="text-gray-600 hover:text-green-600 font-medium transition">T√≠nh chi ph√≠</a>
                </div>
                <!-- Mobile Menu Button (Functional via JS below) -->
                <div class="flex items-center sm:hidden">
                    <button id="mobile-menu-btn" class="text-gray-600 focus:outline-none p-2">
                        ‚ò∞
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden sm:hidden bg-white border-t border-gray-100">
            <a href="#dashboard" class="block px-4 py-2 text-gray-700 hover:bg-gray-50">T·ªïng quan</a>
            <a href="#itinerary" class="block px-4 py-2 text-gray-700 hover:bg-gray-50">L·ªãch tr√¨nh</a>
            <a href="#budget-tool" class="block px-4 py-2 text-gray-700 hover:bg-gray-50">T√≠nh chi ph√≠</a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-12">

        <!-- Intro Section -->
        <section class="text-center space-y-4">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-800">L·ªãch Tr√¨nh Vi Vu H√† N·ªôi: S√°ng ƒê·∫øn Chi·ªÅu</h2>
            <p class="max-w-2xl mx-auto text-gray-600 text-lg">
                M·ªôt k·∫ø ho·∫°ch t·ªëi ∆∞u cho 2 ng∆∞·ªùi v·ªõi ng√¢n s√°ch ~500k. L·ªô tr√¨nh ƒë∆∞·ª£c thi·∫øt k·∫ø thu·∫≠n ƒë∆∞·ªùng t·ª´ khu v·ª±c H·ªì T√¢y/Ba ƒê√¨nh v·ªÅ C·∫ßu Gi·∫•y ƒë·ªÉ k·∫øt th√∫c t·∫°i Trung K√≠nh.
            </p>
            <div class="flex justify-center gap-4 text-sm font-semibold text-gray-500 mt-4">
                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full">üí∞ 500,000ƒë / 2 Ng∆∞·ªùi</span>
                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">‚è±Ô∏è 08:30 - 16:30</span>
                <span class="bg-orange-100 text-orange-800 px-3 py-1 rounded-full">üìç K·∫øt th√∫c: Trung K√≠nh</span>
            </div>
        </section>

        <!-- DASHBOARD SECTION -->
        <section id="dashboard" class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6 md:p-8">
            <div class="mb-6">
                <h3 class="text-2xl font-bold text-gray-800 border-l-4 border-green-500 pl-4">Ph√¢n T√≠ch T·ªïng Quan</h3>
                <p class="mt-2 text-gray-600">
                    D∆∞·ªõi ƒë√¢y l√† ph√¢n b·ªï ng√¢n s√°ch d·ª± ki·∫øn v√† th·ªùi gian cho chuy·∫øn ƒëi. Bi·ªÉu ƒë·ªì gi√∫p b·∫°n h√¨nh dung m·ª©c ƒë·ªô kh·∫£ thi c·ªßa m·ª•c ti√™u 500k cho 2 ng∆∞·ªùi.
                </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <!-- Chart 1: Budget Breakdown -->
                <div class="flex flex-col items-center">
                    <h4 class="text-lg font-semibold text-gray-700 mb-4">Ph√¢n B·ªï Ng√¢n S√°ch (D·ª± ki·∫øn)</h4>
                    <div class="chart-container">
                        <canvas id="budgetChart"></canvas>
                    </div>
                    <p class="text-sm text-center text-gray-500 mt-2 italic">T·ªïng chi ph√≠ d·ª± ki·∫øn: <span id="total-display" class="font-bold text-green-600">460,000</span> VNƒê</p>
                </div>

                <!-- Chart 2: Time Allocation -->
                <div class="flex flex-col items-center">
                    <h4 class="text-lg font-semibold text-gray-700 mb-4">Ph√¢n B·ªï Th·ªùi Gian (Gi·ªù)</h4>
                    <div class="chart-container">
                        <canvas id="timeChart"></canvas>
                    </div>
                     <p class="text-sm text-center text-gray-500 mt-2 italic">T·∫≠p trung nhi·ªÅu th·ªùi gian nh·∫•t v√†o tr·∫£i nghi·ªám & ch·ª•p ·∫£nh.</p>
                </div>
            </div>
        </section>

        <!-- ITINERARY SECTION -->
        <section id="itinerary" class="relative">
            <div class="mb-8">
                <h3 class="text-2xl font-bold text-gray-800 border-l-4 border-blue-500 pl-4">L·ªãch Tr√¨nh Chi Ti·∫øt</h3>
                <p class="mt-2 text-gray-600">
                    L·ªô tr√¨nh di chuy·ªÉn theo h∆∞·ªõng ƒê√¥ng B·∫Øc -> T√¢y Nam ƒë·ªÉ thu·∫≠n ti·ªán v·ªÅ Trung K√≠nh. Click v√†o t·ª´ng ƒë·ªãa ƒëi·ªÉm ƒë·ªÉ xem chi ti·∫øt.
                </p>
            </div>

            <div class="timeline-line relative space-y-8 pl-2 md:pl-0">
                <!-- Script will populate itinerary items here -->
                <div id="itinerary-list" class="space-y-6">
                    <!-- Dynamic Content -->
                </div>
            </div>
        </section>

        <!-- BUDGET TOOL SECTION -->
        <section id="budget-tool" class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-6 md:p-8 border border-gray-200">
            <div class="mb-6">
                <h3 class="text-2xl font-bold text-gray-800 border-l-4 border-orange-500 pl-4">C√¥ng C·ª• D·ª± T√≠nh Chi Ph√≠</h3>
                <p class="mt-2 text-gray-600">
                    ƒêi·ªÅu ch·ªânh ng√¢n s√°ch cho t·ª´ng ho·∫°t ƒë·ªông ƒë·ªÉ xem t·ªïng chi ph√≠ thay ƒë·ªïi nh∆∞ th·∫ø n√†o. Gi√∫p b·∫°n ki·ªÉm so√°t t√∫i ti·ªÅn tr∆∞·ªõc khi ƒëi.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="space-y-6">
                    <!-- Slider 1 -->
                    <div>
                        <label class="flex justify-between font-medium text-gray-700 mb-2">
                            <span>üçú ƒÇn u·ªëng (2 ng∆∞·ªùi)</span>
                            <span id="food-val" class="text-blue-600">180,000ƒë</span>
                        </label>
                        <input type="range" id="food-input" min="100000" max="400000" step="10000" value="180000" class="w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer accent-blue-600">
                        <p class="text-xs text-gray-500 mt-1">G·ª£i √Ω: 150k - 250k cho ph·ªü cu·ªën/b√∫n ch·∫£ + n∆∞·ªõc.</p>
                    </div>

                    <!-- Slider 2 -->
                    <div>
                        <label class="flex justify-between font-medium text-gray-700 mb-2">
                            <span>üì∏ Photobooth & V√©</span>
                            <span id="fun-val" class="text-purple-600">100,000ƒë</span>
                        </label>
                        <input type="range" id="fun-input" min="50000" max="200000" step="10000" value="100000" class="w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer accent-purple-600">
                        <p class="text-xs text-gray-500 mt-1">Trung b√¨nh 70k - 100k/l·∫ßn ch·ª•p.</p>
                    </div>

                    <!-- Slider 3 -->
                    <div>
                        <label class="flex justify-between font-medium text-gray-700 mb-2">
                            <span>üé® T√¥ T∆∞·ª£ng & Cafe</span>
                            <span id="art-val" class="text-orange-600">120,000ƒë</span>
                        </label>
                        <input type="range" id="art-input" min="50000" max="250000" step="10000" value="120000" class="w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer accent-orange-600">
                        <p class="text-xs text-gray-500 mt-1">T∆∞·ª£ng: 30k-60k/c, N∆∞·ªõc: 30k-50k/c·ªëc.</p>
                    </div>
                     <!-- Slider 4 -->
                     <div>
                        <label class="flex justify-between font-medium text-gray-700 mb-2">
                            <span>‚õΩ XƒÉng xe & G·ª≠i xe</span>
                            <span id="misc-val" class="text-gray-600">30,000ƒë</span>
                        </label>
                        <input type="range" id="misc-input" min="10000" max="100000" step="5000" value="30000" class="w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer accent-gray-600">
                    </div>
                </div>

                <!-- Result Display -->
                <div class="flex flex-col justify-center items-center bg-white rounded-xl shadow-lg p-6">
                    <h4 class="text-lg text-gray-500 uppercase tracking-wide font-semibold">T·ªïng ∆Ø·ªõc T√≠nh</h4>
                    <div id="calculator-total" class="text-5xl font-bold text-green-600 my-4">430,000ƒë</div>
                    <div id="budget-status" class="px-4 py-2 rounded-full bg-green-100 text-green-800 font-medium text-sm">
                        ‚úÖ Trong ng√¢n s√°ch (D∆∞·ªõi 500k)
                    </div>
                    <p class="text-center text-sm text-gray-400 mt-6">
                        *Chi ph√≠ th·ª±c t·∫ø c√≥ th·ªÉ thay ƒë·ªïi t√πy thu·ªôc v√†o m√≥n g·ªçi th√™m.
                    </p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-gray-300 py-8 mt-12">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <p class="mb-2">·ª®ng d·ª•ng l√™n l·ªãch tr√¨nh H√† N·ªôi</p>
            <p class="text-sm text-gray-500">K·∫øt th√∫c t·∫°i: 168 P. Trung K√≠nh, Y√™n Ho√†, C·∫ßu Gi·∫•y</p>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA STORE ---
        // Base itinerary data with logic for location selection
        const tripData = [
            {
                id: 1,
                time: "08:30 - 09:30",
                title: "ƒÇn S√°ng & Cafe",
                location: "Ph·ªü Cu·ªën Ng≈© X√£ (ho·∫∑c Ph·ªü H∆∞ng B·ªÅn)",
                area: "Ba ƒê√¨nh / Tr√∫c B·∫°ch",
                desc: "Kh·ªüi ƒë·∫ßu ng√†y m·ªõi v·ªõi m√≥n ƒë·∫∑c s·∫£n H√† N·ªôi nh·∫π b·ª•ng. Khu v·ª±c Ng≈© X√£ n·∫±m ngay s√°t H·ªì T√¢y, r·∫•t ti·ªán ƒë·ªÉ di chuy·ªÉn sang ƒëi·ªÉm ti·∫øp theo.",
                cost: 150000,
                icon: "üçú",
                type: "food",
                navNote: "ƒêi th·∫≥ng ƒë∆∞·ªùng Thanh Ni√™n ƒë·ªÉ sang H·ªì T√¢y."
            },
            {
                id: 2,
                time: "09:45 - 11:00",
                title: "D·∫°o H·ªì T√¢y & Ch√πa Tr·∫•n Qu·ªëc",
                location: "ƒê∆∞·ªùng Thanh Ni√™n / Y√™n Ph·ª•",
                area: "T√¢y H·ªì",
                desc: "ƒêi·ªÉm check-in 'th∆°' nh·∫•t H√† N·ªôi. C√≥ th·ªÉ gh√© thƒÉm Ch√πa Tr·∫•n Qu·ªëc ho·∫∑c t√¨m m·ªôt g√≥c 'H·∫ªm T·ª´ Hoa' ƒë·ªÉ ch·ª•p ·∫£nh. Kh√¥ng kh√≠ bu·ªïi s√°ng r·∫•t trong l√†nh.",
                cost: 20000, // Parking/Drinks
                icon: "üåä",
                type: "sightseeing",
                navNote: "T·ª´ H·ªì T√¢y ƒëi ng∆∞·ª£c v·ªÅ ph√≠a LƒÉng B√°c (H√πng V∆∞∆°ng) kho·∫£ng 10p xe m√°y."
            },
            {
                id: 3,
                time: "11:15 - 12:30",
                title: "LƒÉng B√°c & Ch√πa M·ªôt C·ªôt",
                location: "Qu·∫£ng tr∆∞·ªùng Ba ƒê√¨nh",
                area: "Ba ƒê√¨nh",
                desc: "Tham quan qu·∫ßn th·ªÉ di t√≠ch l·ªãch s·ª≠. Check-in b√™n ngo√†i LƒÉng v√† ƒëi d·∫°o khu v·ª±c Ch√πa M·ªôt C·ªôt. L∆∞u √Ω trang ph·ª•c l·ªãch s·ª± n·∫øu v√†o ch√πa.",
                cost: 30000, // Parking/Snacks
                icon: "üáªüá≥",
                type: "sightseeing",
                navNote: "Di chuy·ªÉn v·ªÅ h∆∞·ªõng ƒê·ªôi C·∫•n/Kim M√£ ƒë·ªÉ t√¨m Photobooth."
            },
            {
                id: 4,
                time: "12:45 - 13:30",
                title: "Ch·ª•p ·∫¢nh Photobooth",
                location: "Lang Thang ho·∫∑c MOMO Studio",
                area: "Ba ƒê√¨nh / ƒê·ªëng ƒêa",
                desc: "L∆∞u gi·ªØ k·ª∑ ni·ªám v·ªõi c√°c booth ch·ª•p ·∫£nh l·∫•y ngay ƒëang trend. Khu v·ª±c Ba ƒê√¨nh c√≥ nhi·ªÅu ti·ªám ƒë·∫πp.",
                cost: 100000,
                icon: "üì∏",
                type: "fun",
                navNote: "Ti·∫øp t·ª•c h∆∞·ªõng v·ªÅ ph√≠a C·∫ßu Gi·∫•y."
            },
            {
                id: 5,
                time: "13:45 - 15:45",
                title: "T√¥ T∆∞·ª£ng & Th∆∞ Gi√£n",
                location: "Timeline Coffee ho·∫∑c Cafe quanh C·∫ßu Gi·∫•y",
                area: "C·∫ßu Gi·∫•y / ƒê·ªëng ƒêa",
                desc: "Ho·∫°t ƒë·ªông th∆∞ gi√£n bu·ªïi chi·ªÅu. V·ª´a u·ªëng n∆∞·ªõc v·ª´a t√¥ t∆∞·ª£ng. Ch·ªçn qu√°n khu v·ª±c g·∫ßn C·∫ßu Gi·∫•y ƒë·ªÉ ti·ªán v·ªÅ ƒë√≠ch.",
                cost: 130000,
                icon: "üé®",
                type: "art",
                navNote: "Ch·ªâ c√≤n c√°ch ƒëi·ªÉm cu·ªëi kho·∫£ng 10-15 ph√∫t di chuy·ªÉn."
            },
            {
                id: 6,
                time: "16:15",
                title: "V·ªÅ ƒê√≠ch",
                location: "168 P. Trung K√≠nh, Y√™n Ho√†",
                area: "C·∫ßu Gi·∫•y",
                desc: "K·∫øt th√∫c h√†nh tr√¨nh an to√†n. T·ªïng qu√£ng ƒë∆∞·ªùng di chuy·ªÉn h·ª£p l√Ω, kh√¥ng b·ªã v√≤ng v√®o.",
                cost: 0,
                icon: "üèÅ",
                type: "end",
                navNote: "Ho√†n th√†nh chuy·∫øn ƒëi."
            }
        ];

        // --- DOM ELEMENTS ---
        const itineraryContainer = document.getElementById('itinerary-list');
        const budgetStatusEl = document.getElementById('budget-status');
        const calcTotalEl = document.getElementById('calculator-total');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');

        // Inputs
        const inputs = {
            food: document.getElementById('food-input'),
            fun: document.getElementById('fun-input'),
            art: document.getElementById('art-input'),
            misc: document.getElementById('misc-input')
        };
        const displays = {
            food: document.getElementById('food-val'),
            fun: document.getElementById('fun-val'),
            art: document.getElementById('art-val'),
            misc: document.getElementById('misc-val')
        };

        // --- INITIALIZATION ---
        function init() {
            renderItinerary();
            initCharts();
            initCalculator();
            initMobileMenu();
        }

        // --- RENDER ITINERARY ---
        function renderItinerary() {
            itineraryContainer.innerHTML = '';
            tripData.forEach((item, index) => {
                const isLast = index === tripData.length - 1;
                const html = `
                    <div class="activity-card relative flex items-start z-10 pl-8 md:pl-12">
                        <!-- Timeline Node -->
                        <div class="absolute left-0 md:left-2 flex items-center justify-center w-10 h-10 rounded-full bg-white border-4 border-green-100 shadow-sm z-20 text-xl">
                            ${item.icon}
                        </div>
                        
                        <!-- Content Card -->
                        <div class="flex-1 bg-white rounded-xl p-5 shadow-sm border border-gray-100 mb-2 w-full">
                            <div class="flex flex-col md:flex-row justify-between md:items-center mb-2">
                                <h4 class="text-lg font-bold text-gray-800">${item.title}</h4>
                                <span class="text-sm font-mono text-blue-600 bg-blue-50 px-2 py-1 rounded">${item.time}</span>
                            </div>
                            <div class="flex items-center text-sm text-gray-500 mb-3">
                                <span class="mr-2">üìç ${item.location}</span>
                                <span class="bg-gray-100 px-2 py-0.5 rounded text-xs">${item.area}</span>
                            </div>
                            <p class="text-gray-600 text-sm mb-3 leading-relaxed">
                                ${item.desc}
                            </p>
                            
                            <div class="flex flex-wrap items-center justify-between pt-3 border-t border-gray-50 mt-2 gap-2">
                                <div class="text-sm font-semibold text-gray-700">
                                    Chi ph√≠ ∆∞·ªõc t√≠nh: <span class="text-green-600">${item.cost.toLocaleString()}ƒë</span>
                                </div>
                                ${!isLast ? `
                                <div class="text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded flex items-center">
                                    <span>üß≠ ${item.navNote}</span>
                                </div>` : ''}
                            </div>
                        </div>
                    </div>
                `;
                itineraryContainer.insertAdjacentHTML('beforeend', html);
            });
        }

        // --- CHARTS CONFIG ---
        function initCharts() {
            // 1. Budget Breakdown Chart
            const ctxBudget = document.getElementById('budgetChart').getContext('2d');
            
            // Aggregating data types
            const costByType = {
                'ƒÇn u·ªëng': 150000,
                'Vui ch∆°i (T√¥ t∆∞·ª£ng)': 130000,
                'Ch·ª•p ·∫£nh/V√©': 130000,
                'Di chuy·ªÉn/Kh√°c': 50000
            };

            const budgetChart = new Chart(ctxBudget, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(costByType),
                    datasets: [{
                        data: Object.values(costByType),
                        backgroundColor: [
                            '#60A5FA', // Blue (Food)
                            '#F97316', // Orange (Art)
                            '#A855F7', // Purple (Photos)
                            '#9CA3AF'  // Gray (Misc)
                        ],
                        borderWidth: 0,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false, // Critical for container scaling
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: { family: 'Inter', size: 12 },
                                usePointStyle: true,
                                padding: 20
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.raw.toLocaleString() + 'ƒë';
                                }
                            }
                        }
                    }
                }
            });

            // 2. Time Allocation Chart
            const ctxTime = document.getElementById('timeChart').getContext('2d');
            const timeChart = new Chart(ctxTime, {
                type: 'bar',
                data: {
                    labels: ['ƒÇn u·ªëng', 'Ng·∫Øm c·∫£nh', 'Ch·ª•p ·∫£nh', 'T√¥ t∆∞·ª£ng', 'Di chuy·ªÉn'],
                    datasets: [{
                        label: 'Th·ªùi gian (ph√∫t)',
                        data: [60, 90, 45, 120, 60],
                        backgroundColor: '#34D399', // Green
                        borderRadius: 6,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y', // Horizontal bar for better readability
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            grid: { display: false },
                            ticks: { font: { family: 'Inter' } }
                        },
                        y: {
                            grid: { display: false },
                            ticks: { font: { family: 'Inter', weight: '500' } }
                        }
                    }
                }
            });
        }

        // --- CALCULATOR LOGIC ---
        function initCalculator() {
            function updateCalc() {
                const food = parseInt(inputs.food.value);
                const fun = parseInt(inputs.fun.value);
                const art = parseInt(inputs.art.value);
                const misc = parseInt(inputs.misc.value);

                // Update text displays
                displays.food.textContent = food.toLocaleString() + 'ƒë';
                displays.fun.textContent = fun.toLocaleString() + 'ƒë';
                displays.art.textContent = art.toLocaleString() + 'ƒë';
                displays.misc.textContent = misc.toLocaleString() + 'ƒë';

                const total = food + fun + art + misc;
                calcTotalEl.textContent = total.toLocaleString() + 'ƒë';

                // Status logic
                if (total <= 500000) {
                    budgetStatusEl.className = "px-4 py-2 rounded-full bg-green-100 text-green-800 font-medium text-sm";
                    budgetStatusEl.innerHTML = "‚úÖ Trong ng√¢n s√°ch (D∆∞·ªõi 500k)";
                    calcTotalEl.classList.remove('text-red-600');
                    calcTotalEl.classList.add('text-green-600');
                } else {
                    budgetStatusEl.className = "px-4 py-2 rounded-full bg-red-100 text-red-800 font-medium text-sm";
                    budgetStatusEl.innerHTML = "‚ö†Ô∏è V∆∞·ª£t ng√¢n s√°ch! C·∫ßn ti·∫øt ki·ªám h∆°n.";
                    calcTotalEl.classList.remove('text-green-600');
                    calcTotalEl.classList.add('text-red-600');
                }
            }

            // Attach listeners
            Object.values(inputs).forEach(input => {
                input.addEventListener('input', updateCalc);
            });
            
            // Run once on load
            updateCalc();
        }

        // --- MOBILE MENU ---
        function initMobileMenu() {
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            // Close menu when clicking a link
            document.querySelectorAll('#mobile-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                });
            });
        }

        // Start App
        document.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>